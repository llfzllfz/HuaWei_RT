# HuaWei_RT

# 项目目录

```c++
main.cpp //主入口
berth.h // 港口参数
berth.cpp
map.h //地图参数
map.cpp
robot.h //机器人控制系统
robot.cpp
ship.h //船舶控制系统
ship.cpp
```

# 思路

以港口作为中转，分成两部分，分别是机器人控制系统和船舶控制系统

机器人控制系统由寻路系统构成，根据场上货物的地点以及港口的位置，选择价值/距离最大的货物运输到最近的港口，同时更新对应港口的参数

船舶控制系统，根据港口货物量来更新船舶的路径，控制船舶行动。

## 机器人控制系统

分为寻找货物系统以及寻找港口系统

### 初始化

计算每个港口到地图上任意点的距离。

​	用于计算取到货物后去哪个港口是最近的，以及计算取什么货物性价比（货物价值/港口出发到取到货物到到达港口的时间）最高

初始化有哪些港口是开放的，哪些港口是停用的，

### 寻找货物系统

比较好的一个想法：每帧都搜寻一次货物，但是需要考虑时间的因素

性价比最优： 查找机器人当前位置下性价比最高的货物是哪个（需要考虑货物的消失时间），然后锁定到该货物的路径，并且抢占该货物。

数量最优：搜寻离当前位置+货物到港口距离最近的港口，锁定该货物，并抢占。

价值最优：搜寻价值最高的货物，锁定该货物，并抢占。

### 寻找港口系统

#### 寻路系统

寻找机器人到锁定港口位置的最优路径

#### 查找系统

查找机器人当前位置距离开放港口最近的港口位置

### 碰撞检测系统

+ 多个机器人抢占同一个地方
+ 多个机器人互相换位置
+ 多个机器人堵塞在港口
+ 多个机器人堵塞在货物

当发生多个机器人抢占同一个地方的时候，令一个机器人重新寻路，其余机器人暂停行动。

当发生多个机器人互换位置的时候，令一个机器人重新寻路，其余机器人暂停行动。

当发生多个港口堵塞的时候（也就是目标港口无法到达），令机器人重新寻找开放的最近港口，去那个港口。

当多个机器人堵塞在货物的时候，令机器人重新寻路。

## 船舶控制系统



# 综合考虑

考虑到船最开始到达的时候只有半趟行程（后续是去+回+搬运货物时间），因此先集中机器人到部分开放的港口集中取货（可以考虑数量取货/性价比取货），时间差不多的时候，机器人开放全港口，全图，等对应港口的船装完货物离开的时候，机器人集中下一部分港口位置

同时需要考虑港口-港口还是港口-虚拟点